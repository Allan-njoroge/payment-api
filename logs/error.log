{"level":"error","message":"Registration Error Occurred  Cannot destructure property 'first_name' of 'req.body' as it is undefined.","service":"AUTH","stack":"TypeError: Cannot destructure property 'first_name' of 'req.body' as it is undefined.\n    at C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:12:7\n    at Generator.next (<anonymous>)\n    at C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:4:12)\n    at registerUser (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:9:24)\n    at C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\utils\\asyncHandler.ts:7:21\n    at Layer.handle [as handle_request] (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\express\\lib\\router\\route.js:119:3)","timestamp":"2025-03-24T14:21:22.259Z"}
{"level":"error","message":"Registration Error Occurred  Cannot destructure property 'first_name' of 'req.body' as it is undefined.","service":"AUTH","stack":"TypeError: Cannot destructure property 'first_name' of 'req.body' as it is undefined.\n    at C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:12:7\n    at Generator.next (<anonymous>)\n    at C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:4:12)\n    at registerUser (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:9:24)\n    at C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\utils\\asyncHandler.ts:7:21\n    at Layer.handle [as handle_request] (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\express\\lib\\router\\route.js:119:3)","timestamp":"2025-03-24T14:22:01.151Z"}
{"clientVersion":"6.5.0","code":"P2002","level":"error","message":"Registration Error Occurred  \nInvalid `prisma.verificationCode.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:38:35\n\n  35 \n  36 // Generate a verification code and  send it to the database\n  37 const verificationCode = Math.floor(100000 + Math.random() * 900000);\n→ 38 await prisma.verificationCode.create(\nUnique constraint failed on the constraint: `VerificationCode_email_address_key`","meta":{"modelName":"VerificationCode","target":"VerificationCode_email_address_key"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.verificationCode.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\register.controller.ts:38:35\n\n  35 \n  36 // Generate a verification code and  send it to the database\n  37 const verificationCode = Math.floor(100000 + Math.random() * 900000);\n→ 38 await prisma.verificationCode.create(\nUnique constraint failed on the constraint: `VerificationCode_email_address_key`\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T14:24:46.792Z"}
{"clientVersion":"6.5.0","level":"error","message":"Account verification failed  \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:47:23\n\n  44 const salt = bcrypt.genSaltSync(10);\n  45 const hashedPassword = bcrypt.hashSync(password, salt);\n  46 \n→ 47 await prisma.user.create({\n       data: {\n         first_name: \"John\",\n         last_name: \"Doe\",\n         email_address: \"johndoe@gmail.com\",\n         phone_number: \"254700056642\",\n                       ~~~~~~~~~~~~~~\n         password: \"$2b$10$o1maXjmCvfxHS4wtZusTOOC8AE1ALJQd148EU.6nJtusMU/4xKg3W\"\n       }\n     })\n\nArgument `phone_number`: Invalid value provided. Expected Int or Null, provided String.","name":"PrismaClientValidationError","service":"AUTH","stack":"PrismaClientValidationError: \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:47:23\n\n  44 const salt = bcrypt.genSaltSync(10);\n  45 const hashedPassword = bcrypt.hashSync(password, salt);\n  46 \n→ 47 await prisma.user.create({\n       data: {\n         first_name: \"John\",\n         last_name: \"Doe\",\n         email_address: \"johndoe@gmail.com\",\n         phone_number: \"254700056642\",\n                       ~~~~~~~~~~~~~~\n         password: \"$2b$10$o1maXjmCvfxHS4wtZusTOOC8AE1ALJQd148EU.6nJtusMU/4xKg3W\"\n       }\n     })\n\nArgument `phone_number`: Invalid value provided. Expected Int or Null, provided String.\n    at Cn (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:29:1363)\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7177)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T14:30:05.383Z"}
{"clientVersion":"6.5.0","code":"P2020","level":"error","message":"Account verification failed  \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:47:23\n\n  44 const salt = bcrypt.genSaltSync(10);\n  45 const hashedPassword = bcrypt.hashSync(password, salt);\n  46 \n→ 47 await prisma.user.create(\nValue out of range for the type. Out of range value for column 'phone_number' at row 1","meta":{"details":"Out of range value for column 'phone_number' at row 1","modelName":"User"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:47:23\n\n  44 const salt = bcrypt.genSaltSync(10);\n  45 const hashedPassword = bcrypt.hashSync(password, salt);\n  46 \n→ 47 await prisma.user.create(\nValue out of range for the type. Out of range value for column 'phone_number' at row 1\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T14:31:13.610Z"}
{"clientVersion":"6.5.0","code":"P2020","level":"error","message":"Account verification failed  \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:47:23\n\n  44 const salt = bcrypt.genSaltSync(10);\n  45 const hashedPassword = bcrypt.hashSync(password, salt);\n  46 \n→ 47 await prisma.user.create(\nValue out of range for the type. Out of range value for column 'phone_number' at row 1","meta":{"details":"Out of range value for column 'phone_number' at row 1","modelName":"User"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:47:23\n\n  44 const salt = bcrypt.genSaltSync(10);\n  45 const hashedPassword = bcrypt.hashSync(password, salt);\n  46 \n→ 47 await prisma.user.create(\nValue out of range for the type. Out of range value for column 'phone_number' at row 1\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T14:31:39.834Z"}
{"clientVersion":"6.5.0","code":"P2002","level":"error","message":"Account verification failed  \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`","meta":{"modelName":"User","target":"User_phone_number_key"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T15:54:20.950Z"}
{"clientVersion":"6.5.0","code":"P2002","level":"error","message":"Account verification failed  \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`","meta":{"modelName":"User","target":"User_phone_number_key"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T15:55:31.239Z"}
{"clientVersion":"6.5.0","code":"P2002","level":"error","message":"Account verification failed  \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`","meta":{"modelName":"User","target":"User_phone_number_key"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T16:00:49.665Z"}
{"clientVersion":"6.5.0","code":"P2002","level":"error","message":"Account verification failed  \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`","meta":{"modelName":"User","target":"User_phone_number_key"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.user.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\controllers\\verify-account.controller.ts:48:39\n\n  45 const salt = bcrypt.genSaltSync(10);\n  46 const hashedPassword = bcrypt.hashSync(password, salt);\n  47 \n→ 48 const newUser = await prisma.user.create(\nUnique constraint failed on the constraint: `User_phone_number_key`\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T16:01:17.030Z"}
{"clientVersion":"6.5.0","code":"P2002","level":"error","message":"Failed to login user  \nInvalid `prisma.refreshToken.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\utils\\generateTokens.ts:36:29\n\n  33 const salt = genSaltSync(10);\n  34 const hashedRefreshToken = hashSync(refreshToken, salt);\n  35 \n→ 36 await prisma.refreshToken.create(\nUnique constraint failed on the constraint: `RefreshToken_user_id_key`","meta":{"modelName":"RefreshToken","target":"RefreshToken_user_id_key"},"name":"PrismaClientKnownRequestError","service":"AUTH","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.refreshToken.create()` invocation in\nC:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\src\\utils\\generateTokens.ts:36:29\n\n  33 const salt = genSaltSync(10);\n  34 const hashedRefreshToken = hashSync(refreshToken, salt);\n  35 \n→ 36 await prisma.refreshToken.create(\nUnique constraint failed on the constraint: `RefreshToken_user_id_key`\n    at Wn.handleRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:7534)\n    at Wn.handleAndLogRequestError (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6858)\n    at Wn.request (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:121:6565)\n    at async l (C:\\Users\\ADMIN\\Desktop\\payment-api\\services\\auth\\node_modules\\@prisma\\client\\runtime\\library.js:130:10067)","timestamp":"2025-03-24T18:15:11.030Z"}
